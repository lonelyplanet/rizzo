:ruby

  attrs = {
    size: { mapping: "traffic-driver" },
    targeting: { position: nil },
    extension: nil
  }

  attrs.merge!(properties) if defined? properties

  attrs[:targeting] = attrs[:targeting].to_json

.adunit.adunit--traffic-driver{ data: attrs }
