// Cards Base
//
//
// .card
//
// Styleguide 1.3

// -----------------------------------------------------------------------------
// Base card object and sizing variables
//
// - Width of a Card defaults to single - override when necessary
// -----------------------------------------------------------------------------

$card-grid-height:                  380px
$card-grid-half-height:             185px

$standard-card-image-height:        275px
$small-card-image-height:           185px

$default-card-top-padding:          55px
$image-only-padding:                7px

$card-content-vertical-padding:     13px
$card-content-horizontal-padding:   15px

// responsive
$mobile-card-grid-height:           296px
$mobile-card-grid-half-height:      143px
$mobile-standard-card-image-height: 192px

// -----------------------------------------------------------------------------
// Card Base
// -----------------------------------------------------------------------------

.card
  +backface-visibility(hidden)
  @extend %standard-shadow
  background: #fff
  margin-bottom: 10px
  position: relative

  // apply hover state only to cards in the results area
  .results &
    .js-hover &:hover
      +box-shadow(0, 2, 2, 0, rgba(3, 46, 92, 0.10))

  // hide the content area for image-only cards when it's not hovered over
  &.card--image-only
    overflow: hidden


// -----------------------------------------------------------------------------
// Card Images
// -----------------------------------------------------------------------------

.card__hero
  height: $standard-card-image-height
  overflow: hidden
  position: relative
  &:after
    +transition()
    @extend %empty-abs-generated-content
    background-color: transparent
    height: 100%
    left: 0
    top: 0
    width: 100%
  .responsive &
    height: $mobile-standard-card-image-height
    +respond-to(medium-view)
      height: $standard-card-image-height

  .card__image
    height: 100%
    &.is-portrait
      height: auto
      max-width: 100%
    .responsive &
      width: 100%
      height: auto
      +respond-to(medium-view)
        height: 100%
        width: auto

  // darken the image when card is hovered over
  .js-hover .card:hover &
    &:after
      background-color: rgba(0,0,0,0.3)

  .card--small-image &
    height: $small-card-image-height

  .card--full-image &
    height: $card-grid-height
    .responsive &
      height: $mobile-card-grid-height
      +respond-to(medium-view)
        height: $card-grid-height

  .card--image-only &
    height: $card-grid-half-height
    .responsive &
      height: $mobile-card-grid-half-height
      +respond-to(medium-view)
        height: $card-grid-half-height

.card__hero__overlay
  height: $standard-card-image-height
  left: 0
  position: absolute
  top: 0
  z-index: 3

  img
    +filter(drop-shadow(0px 0px 15px rgba(0,0,0,0.35)))
    height: 100%


// -----------------------------------------------------------------------------
// Card Content Areas
// -----------------------------------------------------------------------------

.card__content
  color: $header-grey
  height: ($card-grid-height - $standard-card-image-height - (2 * $card-content-vertical-padding) )
  overflow: hidden
  margin-bottom: $card-content-vertical-padding
  padding: $card-content-vertical-padding $card-content-horizontal-padding 0 $card-content-horizontal-padding

  .card--no-image &
    height: $card-grid-height - $default-card-top-padding - $card-content-vertical-padding
    padding-top: $default-card-top-padding

  .card--small-image &
    height: ($card-grid-height - $small-card-image-height - (2 * $card-content-vertical-padding) )
    .responsive &
      height: ($mobile-card-grid-height - $small-card-image-height - (2 * $card-content-vertical-padding) )
      +respond-to(medium-view)
        height: ($card-grid-height - $small-card-image-height - (2 * $card-content-vertical-padding) )

  .card--full-image &
    +background-gradient($startColor: rgba(0,0,0,0), $endColor: rgba(0,0,0,0.75))
    bottom: 0
    color: #fff
    height: auto
    left: 0
    margin: 0
    padding: $card-content-vertical-padding $card-content-horizontal-padding
    position: absolute
    right: 0

  .card--image-only &
    @extend %transition--base
    +font-size(20)
    bottom: -76px // This accommodates for 3 lines of copy.
    color: #fff
    height: auto
    left: 0
    line-height: 22px
    margin: 0
    padding: 0 $card-content-horizontal-padding
    position: absolute
    right: 0

  .js-hover .card--image-only:hover &
    bottom: 3px


// -----------------------------------------------------------------------------
// Card Extended Content
// -----------------------------------------------------------------------------

.card--extended-content,
.card--extended-content--half
  height: $card-grid-height
  .responsive &
    height: $mobile-card-grid-height
    +respond-to(medium-view)
      height: $card-grid-height

  .card__content
    +backface-visibility(hidden)
    background: #fff
    bottom: 0
    left: 0
    position: absolute
    right: 0
    z-index: 3
    padding: $card-content-vertical-padding $card-content-horizontal-padding 0 $card-content-horizontal-padding
    margin-bottom: $card-content-vertical-padding

    &:after
      @extend %empty-abs-generated-content
      +background-gradient($startColor: rgba(255,255,255,0), $endColor: rgba(255,255,255,0.9))
      height: $card-content-vertical-padding
      left: 0
      right: 0
      bottom: 0

  .js-hover &:hover
    .card__content
      &:after
        content: none

    .card__footer
      &:after
        content: none

.card--extended-content
  .card__content
    +transition(height, 0.5, ease)

  .js-hover &:hover
    .card__content
      height: $card-grid-height - ( 2*$card-content-vertical-padding) - 40px
  .js-hover.responsive &:hover
    .card__content
      height: $mobile-card-grid-height - ( 2*$card-content-vertical-padding) - 40px
      +respond-to(medium-view)
        height: $card-grid-height - ( 2*$card-content-vertical-padding) - 40px

.card--extended-content--half
  .card__content
    +transition(height, 0.3, ease)
  .js-hover &:hover
    .card__content
      height: $card-grid-height - ( 2*$card-content-vertical-padding) - 225px
