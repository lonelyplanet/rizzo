// -----------------------------------------------------------------------------
// Media gallery
// -----------------------------------------------------------------------------
.media-gallery
  @extend %clearfix
  @extend %transition--base
  margin-bottom: 20px
  position: relative
  &.has-tabs ~ .card--page__aside
    @extend %media-gallery-transition
    top: -302px
  ~ .card--page__aside
    @extend %media-gallery-transition
    top: -262px

  .media-gallery__container, .tab__content, .slider__viewport, .slider__slide
    height: 241px
    width: 427px
  .media-gallery__container, .tab__content, .slider__viewport
    @extend %clearfix
    @extend %media-gallery-transition
    z-index: 0
    &.is-active
      z-index: 1
  .slider__controls
    @extend %media-gallery-transition
    top: 95px
  .slider__pagination
    display: none
  .slider__viewport,
  .slider__slide
    overflow: hidden
  .slider__viewport,
  .slider__slide
    @extend %media-gallery-transition
    width: 427px
  .slider__container
    @extend %media-gallery-transition
    background: $body-background
  .slider__slide
    background: $body-background
    text-align: center

.media-gallery--lodging

  .media-gallery__container, .tab__content, .slider__viewport, .slider__slide
    width: 548px
    height: 308px

  .slider__controls
    top: 132px

// This is all in a mixin because IE7/8 don't work when the :checked, and .is-checked selectors
// are on the same line below (because IE7/8 don't understand :checked, they discard the entire rule)
@mixin media-gallery-full
  ~ .media-gallery
    .media-gallery__container, .tab__content, .slider__viewport, .slider__slide
      height: 422px
      width: 748px
    .slider__controls
      top: 186px
    .infobox__interesting-places
      display: none
  ~ .card--page__aside
    top: 0

.media-gallery--full
  @extend %visually-hide
  // .is-checked is an ie7/8 fallback
  &:checked
    +media-gallery-full()
  &.is-checked
    +media-gallery-full()

.media-gallery__resizer
  @extend %transition--base
  background: rgba(0,0,0,0.6)
  bottom: 0
  cursor: pointer
  display: block
  height: 40px
  opacity: 0.3
  position: absolute
  right: 0
  width: 40px
  z-index: 6
  &:hover
    @extend %opaque
  &:before
    margin-left: 10px
  .media-gallery--article &
    display: none

.media-gallery__resizer__icon
  width: 70%
  height: 70%
  top: 30%
  left: 30%
  margin: 15%

.media-gallery__container
  +perspective()
  background-color: $body-background
  overflow: hidden
  position: relative
  .is-loading
    height: 100%
    &:after
      top: 50%
  &.is-loading:after
    top: 50%

  .map &
    // Avoids WebKit/Blink bug of map moving when changing POI
    overflow: visible

.media-gallery__img
  @extend %transition--base
  opacity: 1
  position: relative
  width: 100%
  z-index: 1
  &.is-portrait, &.is-wider
    height: 100%
    width: auto
    margin: 0 auto
    display: block

  .is-loading &
    opacity: 0

.media-gallery__map
  height: 100%
  width: 100%
